(this["webpackJsonpreact-slack-clone"]=this["webpackJsonpreact-slack-clone"]||[]).push([[0],{290:function(e,t,a){e.exports=a(553)},299:function(e,t,a){},553:function(e,t,a){"use strict";a.r(t);var n=a(19),r=a(20),s=a(22),o=a(21),l=a(0),c=a.n(l),i=a(65),u=a.n(i),d=a(582),m=(a(299),a(33)),h=a(162);a(303),a(305),a(554);h.initializeApp({apiKey:"AIzaSyC95R5BkVB8ucXzne1UBflUeJS23EQUaBc",authDomain:"react-slack-clone-6b79e.firebaseapp.com",databaseURL:"https://react-slack-clone-6b79e.firebaseio.com",projectId:"react-slack-clone-6b79e",storageBucket:"react-slack-clone-6b79e.appspot.com",messagingSenderId:"590839746857",appId:"1:590839746857:web:da38113b215563dd7be738",measurementId:"G-1YMGD8HDW6"});var f=h,p=function(e){return{type:"SET_CURRENT_CHANNEL",payload:{currentChannel:e}}},g=function(e){return{type:"SET_PRIVATE_CHANNEL",payload:{isPrivateChannel:e}}},v=a(563),C=a(581),E=a(577),y=a(555),b=a(571),S=a(585),k=a(89),R=a(49),j=a(163),U=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={modal:!1,primary:"",secondary:"",user:e.props.currentUser,usersRef:f.database().ref("users"),userColors:[]},e.removeListener=function(){e.state.usersRef.child("".concat(e.state.user.uid,"/colors")).off()},e.addListener=function(t){var a=[];e.state.usersRef.child("".concat(t,"/colors")).on("child_added",(function(t){a.unshift(t.val()),e.setState({userColors:a})}))},e.handleChangePrimary=function(t){return e.setState({primary:t.hex})},e.handleChangeSecondary=function(t){return e.setState({secondary:t.hex})},e.handleSaveColors=function(){e.state.primary&&e.state.secondary&&e.saveColors(e.state.primary,e.state.secondary)},e.saveColors=function(t,a){e.state.usersRef.child("".concat(e.state.user.uid,"/colors")).push().update({primary:t,secondary:a}).then((function(){console.log("Colors added"),e.closeModal()})).catch((function(e){return console.error(e)}))},e.displayUserColors=function(t){return t.length>0&&t.map((function(t,a){return c.a.createElement(c.a.Fragment,{key:a},c.a.createElement(v.a,null),c.a.createElement("div",{className:"color__container",onClick:function(){return e.props.setColors(t.primary,t.secondary)}},c.a.createElement("div",{className:"color__square",style:{background:t.primary}},c.a.createElement("div",{className:"color__overlay",style:{background:t.secondary}}))))}))},e.openModal=function(){return e.setState({modal:!0})},e.closeModal=function(){return e.setState({modal:!1})},e}return Object(r.a)(a,[{key:"componentDidMount",value:function(){this.state.user&&this.addListener(this.state.user.uid)}},{key:"componentWillUnmount",value:function(){this.removeListener()}},{key:"render",value:function(){var e=this.state,t=e.modal,a=e.primary,n=e.secondary,r=e.userColors;return c.a.createElement(C.a,{as:E.a,icon:"labeled",inverted:!0,vertical:!0,visible:!0,width:"very thin"},c.a.createElement(v.a,null),c.a.createElement(y.a,{icon:"add",size:"small",color:"blue",onClick:this.openModal}),this.displayUserColors(r),c.a.createElement(b.a,{basic:!0,open:t,onClose:this.closeModal},c.a.createElement(b.a.Header,null,"Choose App Colors"),c.a.createElement(b.a.Content,null,c.a.createElement(S.a,{inverted:!0},c.a.createElement(k.a,{content:"Primary Color"}),c.a.createElement(j.SliderPicker,{color:a,onChange:this.handleChangePrimary})),c.a.createElement(S.a,{inverted:!0},c.a.createElement(k.a,{content:"Secondary Color"}),c.a.createElement(j.SliderPicker,{color:n,onChange:this.handleChangeSecondary}))),c.a.createElement(b.a.Actions,null,c.a.createElement(y.a,{color:"green",inverted:!0,onClick:this.handleSaveColors},c.a.createElement(R.a,{name:"checkmark"})," Save Colors"),c.a.createElement(y.a,{color:"red",inverted:!0,onClick:this.closeModal},c.a.createElement(R.a,{name:"remove"})," Cancel"))))}}]),a}(c.a.Component),O=Object(m.b)(null,{setColors:function(e,t){return{type:"SET_COLORS",payload:{primaryColor:e,secondaryColor:t}}}})(U),w=a(263),L=a.n(w),P=a(579),A=a(574),N=a(281),T=a(565),M=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={user:e.props.currentUser,modal:!1,previewImage:"",croppedImage:"",blob:null,uploadedCroppedImage:"",storageRef:f.storage().ref(),userRef:f.auth().currentUser,usersRef:f.database().ref("users"),metadata:{contentType:"image/jpeg"}},e.openModal=function(){return e.setState({modal:!0})},e.closeModal=function(){return e.setState({modal:!1})},e.dropdownOptions=function(){return[{key:"user",text:c.a.createElement("span",null,"Signed in as ",c.a.createElement("strong",null,e.state.user.displayName)),disabled:!0},{key:"avatar",text:c.a.createElement("span",{onClick:e.openModal},"Change Avatar")},{key:"signout",text:c.a.createElement("span",{onClick:e.handleSignout},"Sign Out")}]},e.uploadCroppedImage=function(){var t=e.state,a=t.storageRef,n=t.userRef,r=t.blob,s=t.metadata;a.child("avatars/user-".concat(n.uid)).put(r,s).then((function(t){t.ref.getDownloadURL().then((function(t){e.setState({uploadedCroppedImage:t},(function(){return e.changeAvatar()}))}))}))},e.changeAvatar=function(){e.state.userRef.updateProfile({photoURL:e.state.uploadedCroppedImage}).then((function(){console.log("PhotoURL updated"),e.closeModal()})).catch((function(e){console.error(e)})),e.state.usersRef.child(e.state.user.uid).update({avatar:e.state.uploadedCroppedImage}).then((function(){console.log("User avatar updated")})).catch((function(e){console.error(e)}))},e.handleChange=function(t){var a=t.target.files[0],n=new FileReader;a&&(n.readAsDataURL(a),n.addEventListener("load",(function(){e.setState({previewImage:n.result})})))},e.handleCropImage=function(){e.avatarEditor&&e.avatarEditor.getImageScaledToCanvas().toBlob((function(t){var a=URL.createObjectURL(t);e.setState({croppedImage:a,blob:t})}))},e.handleSignout=function(){f.auth().signOut().then((function(){return console.log("signed out!")}))},e}return Object(r.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.user,n=t.modal,r=t.previewImage,s=t.croppedImage,o=this.props.primaryColor;return c.a.createElement(d.a,{style:{background:o}},c.a.createElement(d.a.Column,null,c.a.createElement(d.a.Row,{style:{padding:"1.2em",margin:0}},c.a.createElement(P.a,{inverted:!0,floated:"left",as:"h2"},c.a.createElement(R.a,{name:"code"}),c.a.createElement(P.a.Content,null,"DevChat")),c.a.createElement(P.a,{style:{padding:"0.25em"},as:"h4",inverted:!0},c.a.createElement(A.a,{trigger:c.a.createElement("span",null,c.a.createElement(N.a,{src:a.photoURL,spaced:"right",avatar:!0}),a.displayName),options:this.dropdownOptions()}))),c.a.createElement(b.a,{basic:!0,open:n,onClose:this.closeModal},c.a.createElement(b.a.Header,null,"Change Avatar"),c.a.createElement(b.a.Content,null,c.a.createElement(T.a,{onChange:this.handleChange,fluid:!0,type:"file",label:"New Avatar",name:"previewImage"}),c.a.createElement(d.a,{centered:!0,stackable:!0,columns:2},c.a.createElement(d.a.Row,{centered:!0},c.a.createElement(d.a.Column,{className:"ui center aligned grid"},r&&c.a.createElement(L.a,{ref:function(t){return e.avatarEditor=t},image:r,width:120,height:120,border:50,scale:1.2})),c.a.createElement(d.a.Column,null,s&&c.a.createElement(N.a,{style:{margin:"3.5em auto"},width:100,height:100,src:s}))))),c.a.createElement(b.a.Actions,null,s&&c.a.createElement(y.a,{color:"green",inverted:!0,onClick:this.uploadCroppedImage},c.a.createElement(R.a,{name:"save"})," Change Avatar"),c.a.createElement(y.a,{color:"green",inverted:!0,onClick:this.handleCropImage},c.a.createElement(R.a,{name:"image"})," Preview"),c.a.createElement(y.a,{color:"red",inverted:!0,onClick:this.closeModal},c.a.createElement(R.a,{name:"remove"})," Cancel")))))}}]),a}(c.a.Component),I=a(67),_=a(39),x=a(570),D=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={activeChannel:"",user:e.props.currentUser,channel:null,channels:[],channelName:"",channelDetails:"",channelsRef:f.database().ref("channels"),messagesRef:f.database().ref("messages"),typingRef:f.database().ref("typing"),notifications:[],modal:!1,firstLoad:!0},e.addListeners=function(){var t=[];e.state.channelsRef.on("child_added",(function(a){t.push(a.val()),e.setState({channels:t},(function(){return e.setFirstChannel()})),e.addNotificationListener(a.key)}))},e.addNotificationListener=function(t){e.state.messagesRef.child(t).on("value",(function(a){e.state.channel&&e.handleNotifications(t,e.state.channel.id,e.state.notifications,a)}))},e.handleNotifications=function(t,a,n,r){var s=0,o=n.findIndex((function(e){return e.id===t}));-1!==o?(t!==a&&(s=n[o].total,r.numChildren()-s>0&&(n[o].count=r.numChildren()-s)),n[o].lastKnownTotal=r.numChildren()):n.push({id:t,total:r.numChildren(),lastKnownTotal:r.numChildren(),count:0}),e.setState({notifications:n})},e.removeListeners=function(){e.state.channelsRef.off(),e.state.channels.forEach((function(t){e.state.messagesRef.child(t.id).off()}))},e.setFirstChannel=function(){var t=e.state.channels[0];e.state.firstLoad&&e.state.channels.length>0&&(e.props.setCurrentChannel(t),e.setActiveChannel(t),e.setState({channel:t})),e.setState({firstLoad:!1})},e.addChannel=function(){var t=e.state,a=t.channelsRef,n=t.channelName,r=t.channelDetails,s=t.user,o=a.push().key,l={id:o,name:n,details:r,createdBy:{name:s.displayName,avatar:s.photoURL}};a.child(o).update(l).then((function(){e.setState({channelName:"",channelDetails:""}),e.closeModal(),console.log("channel added")})).catch((function(e){console.error(e)}))},e.handleSubmit=function(t){t.preventDefault(),e.isFormValid(e.state)&&e.addChannel()},e.handleChange=function(t){e.setState(Object(_.a)({},t.target.name,t.target.value))},e.changeChannel=function(t){e.setActiveChannel(t),e.state.typingRef.child(e.state.channel.id).child(e.state.user.uid).remove(),e.clearNotifications(),e.props.setCurrentChannel(t),e.props.setPrivateChannel(!1),e.setState({channel:t})},e.clearNotifications=function(){var t=e.state.notifications.findIndex((function(t){return t.id===e.state.channel.id}));if(-1!==t){var a=Object(I.a)(e.state.notifications);a[t].total=e.state.notifications[t].lastKnownTotal,a[t].count=0,e.setState({notifications:a})}},e.setActiveChannel=function(t){e.setState({activeChannel:t.id})},e.getNotificationCount=function(t){var a=0;if(e.state.notifications.forEach((function(e){e.id===t.id&&(a=e.count)})),a>0)return a},e.displayChannels=function(t){return t.length>0&&t.map((function(t){return c.a.createElement(E.a.Item,{key:t.id,onClick:function(){return e.changeChannel(t)},name:t.name,style:{opacity:.7},active:t.id===e.state.activeChannel},e.getNotificationCount(t)&&c.a.createElement(k.a,{color:"red"},e.getNotificationCount(t)),"# ",t.name)}))},e.isFormValid=function(e){var t=e.channelName,a=e.channelDetails;return t&&a},e.openModal=function(){return e.setState({modal:!0})},e.closeModal=function(){return e.setState({modal:!1})},e}return Object(r.a)(a,[{key:"componentDidMount",value:function(){this.addListeners()}},{key:"componentWillUnmount",value:function(){this.removeListeners()}},{key:"render",value:function(){var e=this.state,t=e.channels,a=e.modal;return c.a.createElement(c.a.Fragment,null,c.a.createElement(E.a.Menu,{className:"menu"},c.a.createElement(E.a.Item,null,c.a.createElement("span",null,c.a.createElement(R.a,{name:"exchange"})," CHANNELS")," ","(",t.length,") ",c.a.createElement(R.a,{name:"add",onClick:this.openModal})),this.displayChannels(t)),c.a.createElement(b.a,{basic:!0,open:a,onClose:this.closeModal},c.a.createElement(b.a.Header,null,"Add a Channel"),c.a.createElement(b.a.Content,null,c.a.createElement(x.a,{onSubmit:this.handleSubmit},c.a.createElement(x.a.Field,null,c.a.createElement(T.a,{fluid:!0,label:"Name of Channel",name:"channelName",onChange:this.handleChange})),c.a.createElement(x.a.Field,null,c.a.createElement(T.a,{fluid:!0,label:"About the Channel",name:"channelDetails",onChange:this.handleChange})))),c.a.createElement(b.a.Actions,null,c.a.createElement(y.a,{color:"green",inverted:!0,onClick:this.handleSubmit},c.a.createElement(R.a,{name:"checkmark"})," Add"),c.a.createElement(y.a,{color:"red",inverted:!0,onClick:this.closeModal},c.a.createElement(R.a,{name:"remove"})," Cancel"))))}}]),a}(c.a.Component),F=Object(m.b)(null,{setCurrentChannel:p,setPrivateChannel:g})(D),B=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={activeChannel:"",user:e.props.currentUser,users:[],usersRef:f.database().ref("users"),connectedRef:f.database().ref(".info/connected"),presenceRef:f.database().ref("presence")},e.removeListeners=function(){e.state.usersRef.off(),e.state.presenceRef.off(),e.state.connectedRef.off()},e.addListeners=function(t){var a=[];e.state.usersRef.on("child_added",(function(n){if(t!==n.key){var r=n.val();r.uid=n.key,r.status="offline",a.push(r),e.setState({users:a})}})),e.state.connectedRef.on("value",(function(a){if(!0===a.val()){var n=e.state.presenceRef.child(t);n.set(!0),n.onDisconnect().remove((function(e){null!==e&&console.error(e)}))}})),e.state.presenceRef.on("child_added",(function(a){t!==a.key&&e.addStatusToUser(a.key)})),e.state.presenceRef.on("child_removed",(function(a){t!==a.key&&e.addStatusToUser(a.key,!1)}))},e.addStatusToUser=function(t){var a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=e.state.users.reduce((function(e,n){return n.uid===t&&(n.status="".concat(a?"online":"offline")),e.concat(n)}),[]);e.setState({users:n})},e.isUserOnline=function(e){return"online"===e.status},e.changeChannel=function(t){var a={id:e.getChannelId(t.uid),name:t.name};e.props.setCurrentChannel(a),e.props.setPrivateChannel(!0),e.setActiveChannel(t.uid)},e.getChannelId=function(t){var a=e.state.user.uid;return t<a?"".concat(t,"/").concat(a):"".concat(a,"/").concat(t)},e.setActiveChannel=function(t){e.setState({activeChannel:t})},e}return Object(r.a)(a,[{key:"componentDidMount",value:function(){this.state.user&&this.addListeners(this.state.user.uid)}},{key:"componentWillUnmount",value:function(){this.removeListeners()}},{key:"render",value:function(){var e=this,t=this.state,a=t.users,n=t.activeChannel;return c.a.createElement(E.a.Menu,{className:"menu"},c.a.createElement(E.a.Item,null,c.a.createElement("span",null,c.a.createElement(R.a,{name:"mail"})," DIRECT MESSAGES")," ","(",a.length,")"),a.map((function(t){return c.a.createElement(E.a.Item,{key:t.uid,active:t.uid===n,onClick:function(){return e.changeChannel(t)},style:{opacity:.7,fontStyle:"italic"}},c.a.createElement(R.a,{name:"circle",color:e.isUserOnline(t)?"green":"red"}),"@ ",t.name)})))}}]),a}(c.a.Component),z=Object(m.b)(null,{setCurrentChannel:p,setPrivateChannel:g})(B),W=a(40),V=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={user:e.props.currentUser,usersRef:f.database().ref("users"),activeChannel:"",starredChannels:[]},e.removeListener=function(){e.state.usersRef.child("".concat(e.state.user.uid,"/starred")).off()},e.addListeners=function(t){e.state.usersRef.child(t).child("starred").on("child_added",(function(t){var a=Object(W.a)({id:t.key},t.val());e.setState({starredChannels:[].concat(Object(I.a)(e.state.starredChannels),[a])})})),e.state.usersRef.child(t).child("starred").on("child_removed",(function(t){var a=Object(W.a)({id:t.key},t.val()),n=e.state.starredChannels.filter((function(e){return e.id!==a.id}));e.setState({starredChannels:n})}))},e.setActiveChannel=function(t){e.setState({activeChannel:t.id})},e.changeChannel=function(t){e.setActiveChannel(t),e.props.setCurrentChannel(t),e.props.setPrivateChannel(!1)},e.displayChannels=function(t){return t.length>0&&t.map((function(t){return c.a.createElement(E.a.Item,{key:t.id,onClick:function(){return e.changeChannel(t)},name:t.name,style:{opacity:.7},active:t.id===e.state.activeChannel},"# ",t.name)}))},e}return Object(r.a)(a,[{key:"componentDidMount",value:function(){this.state.user&&this.addListeners(this.state.user.uid)}},{key:"componentWillUnmount",value:function(){this.removeListener()}},{key:"render",value:function(){var e=this.state.starredChannels;return c.a.createElement(E.a.Menu,{className:"menu"},c.a.createElement(E.a.Item,null,c.a.createElement("span",null,c.a.createElement(R.a,{name:"star"})," STARRED")," ","(",e.length,")"),this.displayChannels(e))}}]),a}(c.a.Component),H=Object(m.b)(null,{setCurrentChannel:p,setPrivateChannel:g})(V),q=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props,t=e.currentUser,a=e.primaryColor;return c.a.createElement(E.a,{size:"large",inverted:!0,fixed:"left",vertical:!0,style:{background:a,fontSize:"1.2rem"}},c.a.createElement(M,{primaryColor:a,currentUser:t}),c.a.createElement(H,{currentUser:t}),c.a.createElement(F,{currentUser:t}),c.a.createElement(z,{currentUser:t}))}}]),a}(c.a.Component),K=a(572),G=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props,t=e.channelName,a=e.numUniqueUsers,n=e.handleSearchChange,r=e.searchLoading,s=e.isPrivateChannel,o=e.handleStar,l=e.isChannelStarred;return c.a.createElement(S.a,{clearing:!0},c.a.createElement(P.a,{fluid:"true",as:"h2",floated:"left",style:{marginBottom:0}},c.a.createElement("span",null,t,!s&&c.a.createElement(R.a,{onClick:o,name:l?"star":"star outline",color:l?"yellow":"black"})),c.a.createElement(P.a.Subheader,null,a)),c.a.createElement(P.a,{floated:"right"},c.a.createElement(T.a,{loading:r,onChange:n,size:"mini",icon:"search",name:"searchTerm",placeholder:"Search Messages"})))}}]),a}(c.a.Component),J=a(272),Q=a.n(J),X=a(168),Y=(a(544),a(167)),Z=a.n(Y),$=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={file:null,authorized:["image/jpeg","image/png"]},e.addFile=function(t){var a=t.target.files[0];a&&e.setState({file:a})},e.sendFile=function(){var t=e.state.file,a=e.props,n=a.uploadFile,r=a.closeModal;null!==t&&(e.isAuthorized(t.name)&&(n(t,{contentType:Z.a.lookup(t.name)}),r(),e.clearFile()))},e.isAuthorized=function(t){return e.state.authorized.includes(Z.a.lookup(t))},e.clearFile=function(){return e.setState({file:null})},e}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props,t=e.modal,a=e.closeModal;return c.a.createElement(b.a,{basic:!0,open:t,onClose:a},c.a.createElement(b.a.Header,null,"Select an Image File"),c.a.createElement(b.a.Content,null,c.a.createElement(T.a,{onChange:this.addFile,fluid:!0,label:"File types: jpg, png",name:"file",type:"file"})),c.a.createElement(b.a.Actions,null,c.a.createElement(y.a,{onClick:this.sendFile,color:"green",inverted:!0},c.a.createElement(R.a,{name:"checkmark"})," Send"),c.a.createElement(y.a,{color:"red",inverted:!0,onClick:a},c.a.createElement(R.a,{name:"remove"})," Cancel")))}}]),a}(c.a.Component),ee=a(566),te=function(e){var t=e.uploadState,a=e.percentUploaded;return"uploading"===t&&c.a.createElement(ee.a,{className:"progress__bar",percent:a,progress:!0,indicating:!0,size:"medium",inverted:!0})},ae=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={storageRef:f.storage().ref(),typingRef:f.database().ref("typing"),uploadTask:null,uploadState:"",percentUploaded:0,message:"",channel:e.props.currentChannel,user:e.props.currentUser,loading:!1,errors:[],modal:!1,emojiPicker:!1},e.openModal=function(){return e.setState({modal:!0})},e.closeModal=function(){return e.setState({modal:!1})},e.handleChange=function(t){e.setState(Object(_.a)({},t.target.name,t.target.value))},e.handleKeyDown=function(t){t.ctrlKey&&13===t.keyCode&&e.sendMessage();var a=e.state,n=a.message,r=a.typingRef,s=a.channel,o=a.user;n?r.child(s.id).child(o.uid).set(o.displayName):r.child(s.id).child(o.uid).remove()},e.handleTogglePicker=function(){e.setState({emojiPicker:!e.state.emojiPicker})},e.handleAddEmoji=function(t){var a=e.state.message,n=e.colonToUnicode(" ".concat(a," ").concat(t.colons," "));e.setState({message:n,emojiPicker:!1}),setTimeout((function(){return e.messageInputRef.focus()}),0)},e.colonToUnicode=function(e){return e.replace(/:[A-Za-z0-9_+-]+:/g,(function(e){e=e.replace(/:/g,"");var t=X.b.emojis[e];if("undefined"!==typeof t){var a=t.native;if("undefined"!==typeof a)return a}return e=":"+e+":"}))},e.createMessage=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a={timestamp:f.database.ServerValue.TIMESTAMP,user:{id:e.state.user.uid,name:e.state.user.displayName,avatar:e.state.user.photoURL}};return null!==t?a.image=t:a.content=e.state.message,a},e.sendMessage=function(){var t=e.props.getMessagesRef,a=e.state,n=a.message,r=a.channel,s=a.user,o=a.typingRef;n?(e.setState({loading:!0}),t().child(r.id).push().set(e.createMessage()).then((function(){e.setState({loading:!1,message:"",errors:[]}),o.child(r.id).child(s.uid).remove()})).catch((function(t){console.error(t),e.setState({loading:!1,errors:e.state.errors.concat(t)})}))):e.setState({errors:e.state.errors.concat({message:"Add a message"})})},e.getPath=function(){return e.props.isPrivateChannel?"chat/private-".concat(e.state.channel.id):"chat/public"},e.uploadFile=function(t,a){var n=e.state.channel.id,r=e.props.getMessagesRef(),s="".concat(e.getPath(),"/").concat(Q()(),".jpg");e.setState({uploadState:"uploading",uploadTask:e.state.storageRef.child(s).put(t,a)},(function(){e.state.uploadTask.on("state_changed",(function(t){var a=Math.round(t.bytesTransferred/t.totalBytes*100);e.setState({percentUploaded:a})}),(function(t){console.error(t),e.setState({errors:e.state.errors.concat(t),uploadState:"error",uploadTask:null})}),(function(){e.state.uploadTask.snapshot.ref.getDownloadURL().then((function(t){e.sendFileMessage(t,r,n)})).catch((function(t){console.error(t),e.setState({errors:e.state.errors.concat(t),uploadState:"error",uploadTask:null})}))}))}))},e.sendFileMessage=function(t,a,n){a.child(n).push().set(e.createMessage(t)).then((function(){e.setState({uploadState:"done"})})).catch((function(t){console.error(t),e.setState({errors:e.state.errors.concat(t)})}))},e}return Object(r.a)(a,[{key:"componentWillUnmount",value:function(){null!==this.state.uploadTask&&(this.state.uploadTask.cancel(),this.setState({uploadTask:null}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.errors,n=t.message,r=t.loading,s=t.modal,o=t.uploadState,l=t.percentUploaded,i=t.emojiPicker;return c.a.createElement(S.a,{className:"message__form"},i&&c.a.createElement(X.a,{set:"apple",onSelect:this.handleAddEmoji,className:"emojipicker",title:"Pick your emoji",emoji:"point_up"}),c.a.createElement(T.a,{fluid:!0,name:"message",onChange:this.handleChange,onKeyDown:this.handleKeyDown,value:n,ref:function(t){return e.messageInputRef=t},style:{marginBottom:"0.7em"},label:c.a.createElement(y.a,{icon:i?"close":"add",content:i?"Close":null,onClick:this.handleTogglePicker}),labelPosition:"left",className:a.some((function(e){return e.message.includes("message")}))?"error":"",placeholder:"Write your message"}),c.a.createElement(y.a.Group,{icon:!0,widths:"2"},c.a.createElement(y.a,{onClick:this.sendMessage,disabled:r,color:"orange",content:"Add Reply",labelPosition:"left",icon:"edit"}),c.a.createElement(y.a,{color:"teal",disabled:"uploading"===o,onClick:this.openModal,content:"Upload Media",labelPosition:"right",icon:"cloud upload"})),c.a.createElement($,{modal:s,closeModal:this.closeModal,uploadFile:this.uploadFile}),c.a.createElement(te,{uploadState:o,percentUploaded:l}))}}]),a}(c.a.Component),ne=a(276),re=a.n(ne),se=function(e,t){return e.user.id===t.uid?"message__self":""},oe=function(e){var t,a=e.message,n=e.user;return c.a.createElement(K.a,null,c.a.createElement(K.a.Avatar,{src:a.user.avatar}),c.a.createElement(K.a.Content,{className:se(a,n)},c.a.createElement(K.a.Author,{as:"a"},a.user.name),c.a.createElement(K.a.Metadata,null,(t=a.timestamp,re()(t).fromNow())),function(e){return e.hasOwnProperty("image")&&!e.hasOwnProperty("content")}(a)?c.a.createElement(N.a,{src:a.image,className:"message__image"}):c.a.createElement(K.a.Text,null,a.content)))},le=function(){return c.a.createElement("div",{className:"typing"},c.a.createElement("div",{className:"typing__dot"}),c.a.createElement("div",{className:"typing__dot"}),c.a.createElement("div",{className:"typing__dot"}))},ce=function(){return c.a.createElement("div",{className:"skeleton"},c.a.createElement("div",{className:"skeleton__avatar"}),c.a.createElement("div",{className:"skeleton__author"}),c.a.createElement("div",{className:"skeleton__details"}))},ie=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={privateChannel:e.props.isPrivateChannel,privateMessagesRef:f.database().ref("privateMessages"),messagesRef:f.database().ref("messages"),messages:[],messagesLoading:!0,channel:e.props.currentChannel,isChannelStarred:!1,user:e.props.currentUser,usersRef:f.database().ref("users"),numUniqueUsers:"",searchTerm:"",searchLoading:!1,searchResults:[],typingRef:f.database().ref("typing"),typingUsers:[],connectedRef:f.database().ref(".info/connected"),listeners:[]},e.removeListeners=function(e){e.forEach((function(e){e.ref.child(e.id).off(e.event)}))},e.addToListeners=function(t,a,n){if(-1===e.state.listeners.findIndex((function(e){return e.id===t&&e.ref===a&&e.event===n}))){var r={id:t,ref:a,event:n};e.setState({listeners:e.state.listeners.concat(r)})}},e.scrollToBottom=function(){e.messagesEnd.scrollIntoView({behavior:"smooth"})},e.addListeners=function(t){e.addMessageListener(t),e.addTypingListeners(t)},e.addTypingListeners=function(t){var a=[];e.state.typingRef.child(t).on("child_added",(function(t){t.key!==e.state.user.uid&&(a=a.concat({id:t.key,name:t.val()}),e.setState({typingUsers:a}))})),e.addToListeners(t,e.state.typingRef,"child_added"),e.state.typingRef.child(t).on("child_removed",(function(t){-1!==a.findIndex((function(e){return e.id===t.key}))&&(a=a.filter((function(e){return e.id!==t.key})),e.setState({typingUsers:a}))})),e.addToListeners(t,e.state.typingRef,"child_removed"),e.state.connectedRef.on("value",(function(a){!0===a.val()&&e.state.typingRef.child(t).child(e.state.user.uid).onDisconnect().remove((function(e){null!==e&&console.error(e)}))}))},e.addMessageListener=function(t){var a=[],n=e.getMessagesRef();n.child(t).on("child_added",(function(t){a.push(t.val()),e.setState({messages:a,messagesLoading:!1}),e.countUniqueUsers(a),e.countUserPosts(a)})),e.addToListeners(t,n,"child_added")},e.addUserStarsListener=function(t,a){e.state.usersRef.child(a).child("starred").once("value").then((function(a){if(null!==a.val()){var n=Object.keys(a.val()).includes(t);e.setState({isChannelStarred:n})}}))},e.getMessagesRef=function(){var t=e.state,a=t.messagesRef,n=t.privateMessagesRef;return t.privateChannel?n:a},e.handleStar=function(){e.setState((function(e){return{isChannelStarred:!e.isChannelStarred}}),(function(){return e.starChannel()}))},e.starChannel=function(){e.state.isChannelStarred?e.state.usersRef.child("".concat(e.state.user.uid,"/starred")).update(Object(_.a)({},e.state.channel.id,{name:e.state.channel.name,details:e.state.channel.details,createdBy:{name:e.state.channel.createdBy.name,avatar:e.state.channel.createdBy.avatar}})):e.state.usersRef.child("".concat(e.state.user.uid,"/starred")).child(e.state.channel.id).remove((function(e){null!==e&&console.error(e)}))},e.handleSearchChange=function(t){e.setState({searchTerm:t.target.value,searchLoading:!0},(function(){return e.handleSearchMessages()}))},e.handleSearchMessages=function(){var t=Object(I.a)(e.state.messages),a=new RegExp(e.state.searchTerm,"gi"),n=t.reduce((function(e,t){return(t.content&&t.content.match(a)||t.user.name.match(a))&&e.push(t),e}),[]);e.setState({searchResults:n}),setTimeout((function(){return e.setState({searchLoading:!1})}),1e3)},e.countUniqueUsers=function(t){var a=t.reduce((function(e,t){return e.includes(t.user.name)||e.push(t.user.name),e}),[]),n=a.length>1||0===a.length,r="".concat(a.length," user").concat(n?"s":"");e.setState({numUniqueUsers:r})},e.countUserPosts=function(t){var a=t.reduce((function(e,t){return t.user.name in e?e[t.user.name].count+=1:e[t.user.name]={avatar:t.user.avatar,count:1},e}),{});e.props.setUserPosts(a)},e.displayMessages=function(t){return t.length>0&&t.map((function(t){return c.a.createElement(oe,{key:t.timestamp,message:t,user:e.state.user})}))},e.displayChannelName=function(t){return t?"".concat(e.state.privateChannel?"@":"#").concat(t.name):""},e.displayTypingUsers=function(e){return e.length>0&&e.map((function(e){return c.a.createElement("div",{style:{display:"flex",alignItems:"center",marginBottom:"0.2em"},key:e.id},c.a.createElement("span",{className:"user__typing"},e.name," is typing")," ",c.a.createElement(le,null))}))},e.displayMessageSkeleton=function(e){return e?c.a.createElement(c.a.Fragment,null,Object(I.a)(Array(10)).map((function(e,t){return c.a.createElement(ce,{key:t})}))):null},e}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this.state,t=e.channel,a=e.user,n=e.listeners;t&&a&&(this.removeListeners(n),this.addListeners(t.id),this.addUserStarsListener(t.id,a.uid))}},{key:"componentWillUnmount",value:function(){this.removeListeners(this.state.listeners),this.state.connectedRef.off()}},{key:"componentDidUpdate",value:function(e,t){this.messagesEnd&&this.scrollToBottom()}},{key:"render",value:function(){var e=this,t=this.state,a=t.messagesRef,n=t.messages,r=t.channel,s=t.user,o=t.numUniqueUsers,l=t.searchTerm,i=t.searchResults,u=t.searchLoading,d=t.privateChannel,m=t.isChannelStarred,h=t.typingUsers,f=t.messagesLoading;return c.a.createElement(c.a.Fragment,null,c.a.createElement(G,{channelName:this.displayChannelName(r),numUniqueUsers:o,handleSearchChange:this.handleSearchChange,searchLoading:u,isPrivateChannel:d,handleStar:this.handleStar,isChannelStarred:m}),c.a.createElement(S.a,null,c.a.createElement(K.a.Group,{className:"messages"},this.displayMessageSkeleton(f),l?this.displayMessages(i):this.displayMessages(n),this.displayTypingUsers(h),c.a.createElement("div",{ref:function(t){return e.messagesEnd=t}}))),c.a.createElement(ae,{messagesRef:a,currentChannel:r,currentUser:s,isPrivateChannel:d,getMessagesRef:this.getMessagesRef}))}}]),a}(c.a.Component),ue=Object(m.b)(null,{setUserPosts:function(e){return{type:"SET_USER_POSTS",payload:{userPosts:e}}}})(ie),de=a(280),me=a(573),he=a(575),fe=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={channel:e.props.currentChannel,privateChannel:e.props.isPrivateChannel,activeIndex:0},e.setActiveIndex=function(t,a){var n=a.index,r=e.state.activeIndex===n?-1:n;e.setState({activeIndex:r})},e.formatCount=function(e){return"".concat(e,e>1||0===e?" posts":" post")},e.displayTopPosters=function(t){return Object.entries(t).sort((function(e,t){return t[1]-e[1]})).map((function(t,a){var n=Object(de.a)(t,2),r=n[0],s=n[1];return c.a.createElement(me.a.Item,{key:a},c.a.createElement(N.a,{avatar:!0,src:s.avatar}),c.a.createElement(me.a.Content,null,c.a.createElement(me.a.Header,{as:"a"},r),c.a.createElement(me.a.Description,null,e.formatCount(s.count))))})).slice(0,2)},e}return Object(r.a)(a,[{key:"render",value:function(){var e=this.state,t=e.activeIndex,a=e.privateChannel,n=e.channel,r=this.props.userPosts;return a?null:c.a.createElement(S.a,{loading:!n},c.a.createElement(P.a,{as:"h3",attached:"top"},"About # ",n&&n.name),c.a.createElement(he.a,{styled:!0,attached:"true"},c.a.createElement(he.a.Title,{active:0===t,index:0,onClick:this.setActiveIndex},c.a.createElement(R.a,{name:"dropdown"}),c.a.createElement(R.a,{name:"info"}),"Channel Details"),c.a.createElement(he.a.Content,{active:0===t},n&&n.details),c.a.createElement(he.a.Title,{active:1===t,index:1,onClick:this.setActiveIndex},c.a.createElement(R.a,{name:"dropdown"}),c.a.createElement(R.a,{name:"user circle"}),"Top Posters"),c.a.createElement(he.a.Content,{active:1===t},c.a.createElement(me.a,null,r&&this.displayTopPosters(r))),c.a.createElement(he.a.Title,{active:2===t,index:2,onClick:this.setActiveIndex},c.a.createElement(R.a,{name:"dropdown"}),c.a.createElement(R.a,{name:"pencil alternate"}),"Created By"),c.a.createElement(he.a.Content,{active:2===t},c.a.createElement(P.a,{as:"h3"},c.a.createElement(N.a,{circular:!0,src:n&&n.createdBy.avatar}),n&&n.createdBy.name))))}}]),a}(c.a.Component),pe=Object(m.b)((function(e){return{currentUser:e.user.currentUser,currentChannel:e.channel.currentChannel,isPrivateChannel:e.channel.isPrivateChannel,userPosts:e.channel.userPosts,primaryColor:e.colors.primaryColor,secondaryColor:e.colors.secondaryColor}}))((function(e){var t=e.currentUser,a=e.currentChannel,n=e.isPrivateChannel,r=e.userPosts,s=e.primaryColor,o=e.secondaryColor;return c.a.createElement(d.a,{columns:"equal",className:"app",style:{background:o}},c.a.createElement(O,{key:t&&t.name,currentUser:t}),c.a.createElement(q,{key:t&&t.uid,currentUser:t,primaryColor:s}),c.a.createElement(d.a.Column,{style:{marginLeft:320}},c.a.createElement(ue,{key:a&&a.id,currentChannel:a,currentUser:t,isPrivateChannel:n})),c.a.createElement(d.a.Column,{width:4},c.a.createElement(fe,{key:a&&a.name,userPosts:r,currentChannel:a,isPrivateChannel:n})))})),ge=a(576),ve=a(567),Ce=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={email:"",password:"",errors:[],loading:!1},e.displayErrors=function(e){return e.map((function(e,t){return c.a.createElement("p",{key:t},e.message)}))},e.handleChange=function(t){e.setState(Object(_.a)({},t.target.name,t.target.value))},e.handleSubmit=function(t){t.preventDefault(),e.isFormValid(e.state)&&(e.setState({errors:[],loading:!0}),f.auth().signInWithEmailAndPassword(e.state.email,e.state.password).then((function(e){console.log(e)})).catch((function(t){console.error(t),e.setState({errors:e.state.errors.concat(t),loading:!1})})))},e.isFormValid=function(e){var t=e.email,a=e.password;return t&&a},e.handleInputError=function(e,t){return e.some((function(e){return e.message.toLowerCase().includes(t)}))?"error":""},e}return Object(r.a)(a,[{key:"render",value:function(){var e=this.state,t=e.email,a=e.password,n=e.errors,r=e.loading;return c.a.createElement(d.a,{textAlign:"center",verticalAlign:"middle",className:"app"},c.a.createElement(d.a.Column,{style:{maxWidth:450}},c.a.createElement(P.a,{as:"h1",icon:!0,color:"violet",textAlign:"center"},c.a.createElement(R.a,{name:"code branch",color:"violet"}),"Login to DevChat"),c.a.createElement(x.a,{onSubmit:this.handleSubmit,size:"large"},c.a.createElement(S.a,{stacked:!0},c.a.createElement(x.a.Input,{fluid:!0,name:"email",icon:"mail",iconPosition:"left",placeholder:"Email Address",onChange:this.handleChange,value:t,className:this.handleInputError(n,"email"),type:"email"}),c.a.createElement(x.a.Input,{fluid:!0,name:"password",icon:"lock",iconPosition:"left",placeholder:"Password",onChange:this.handleChange,value:a,className:this.handleInputError(n,"password"),type:"password"}),c.a.createElement(y.a,{disabled:r,className:r?"loading":"",color:"violet",fluid:!0,size:"large"},"Submit"))),n.length>0&&c.a.createElement(ge.a,{error:!0},c.a.createElement("h3",null,"Error"),this.displayErrors(n)),c.a.createElement(ge.a,null,"Don't have an account? ",c.a.createElement(ve.a,{to:"/register"},"Register"))))}}]),a}(c.a.Component),Ee=a(277),ye=a.n(Ee),be=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={username:"",email:"",password:"",passwordConfirmation:"",errors:[],loading:!1,usersRef:f.database().ref("users")},e.isFormValid=function(){var t,a=[];return e.isFormEmpty(e.state)?(t={message:"Fill in all fields"},e.setState({errors:a.concat(t)}),!1):!!e.isPasswordValid(e.state)||(t={message:"Password is invalid"},e.setState({errors:a.concat(t)}),!1)},e.isFormEmpty=function(e){var t=e.username,a=e.email,n=e.password,r=e.passwordConfirmation;return!t.length||!a.length||!n.length||!r.length},e.isPasswordValid=function(e){var t=e.password,a=e.passwordConfirmation;return!(t.length<6||a.length<6)&&t===a},e.displayErrors=function(e){return e.map((function(e,t){return c.a.createElement("p",{key:t},e.message)}))},e.handleChange=function(t){e.setState(Object(_.a)({},t.target.name,t.target.value))},e.handleSubmit=function(t){t.preventDefault(),e.isFormValid()&&(e.setState({errors:[],loading:!0}),f.auth().createUserWithEmailAndPassword(e.state.email,e.state.password).then((function(t){console.log(t),t.user.updateProfile({displayName:e.state.username,photoURL:"http://gravatar.com/avatar/".concat(ye()(t.user.email),"?d=identicon")}).then((function(){e.saveUser(t).then((function(){console.log("user saved")}))})).catch((function(t){console.error(t),e.setState({errors:e.state.errors.concat(t),loading:!1})}))})).catch((function(t){console.error(t),e.setState({errors:e.state.errors.concat(t),loading:!1})})))},e.saveUser=function(t){return e.state.usersRef.child(t.user.uid).set({name:t.user.displayName,avatar:t.user.photoURL})},e.handleInputError=function(e,t){return e.some((function(e){return e.message.toLowerCase().includes(t)}))?"error":""},e}return Object(r.a)(a,[{key:"render",value:function(){var e=this.state,t=e.username,a=e.email,n=e.password,r=e.passwordConfirmation,s=e.errors,o=e.loading;return c.a.createElement(d.a,{textAlign:"center",verticalAlign:"middle",className:"app"},c.a.createElement(d.a.Column,{style:{maxWidth:450}},c.a.createElement(P.a,{as:"h1",icon:!0,color:"orange",textAlign:"center"},c.a.createElement(R.a,{name:"puzzle piece",color:"orange"}),"Register for DevChat"),c.a.createElement(x.a,{onSubmit:this.handleSubmit,size:"large"},c.a.createElement(S.a,{stacked:!0},c.a.createElement(x.a.Input,{fluid:!0,name:"username",icon:"user",iconPosition:"left",placeholder:"Username",onChange:this.handleChange,value:t,type:"text"}),c.a.createElement(x.a.Input,{fluid:!0,name:"email",icon:"mail",iconPosition:"left",placeholder:"Email Address",onChange:this.handleChange,value:a,className:this.handleInputError(s,"email"),type:"email"}),c.a.createElement(x.a.Input,{fluid:!0,name:"password",icon:"lock",iconPosition:"left",placeholder:"Password",onChange:this.handleChange,value:n,className:this.handleInputError(s,"password"),type:"password"}),c.a.createElement(x.a.Input,{fluid:!0,name:"passwordConfirmation",icon:"repeat",iconPosition:"left",placeholder:"Password Confirmation",onChange:this.handleChange,value:r,className:this.handleInputError(s,"password"),type:"password"}),c.a.createElement(y.a,{disabled:o,className:o?"loading":"",color:"orange",fluid:!0,size:"large"},"Submit"))),s.length>0&&c.a.createElement(ge.a,{error:!0},c.a.createElement("h3",null,"Error"),this.displayErrors(s)),c.a.createElement(ge.a,null,"Already a user? ",c.a.createElement(ve.a,{to:"/login"},"Login"))))}}]),a}(c.a.Component),Se=a(580),ke=a(568),Re=function(){return c.a.createElement(Se.a,{active:!0},c.a.createElement(ke.a,{size:"huge",content:"Preparing Chat..."}))},je=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Ue(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}a(551);var Oe=a(584),we=a(569),Le=a(583),Pe=a(578),Ae=a(66),Ne=a(278),Te={currentUser:null,isLoading:!0},Me={currentChannel:null,isPrivateChannel:!1,userPosts:null},Ie={primaryColor:"#4c3c4c",secondaryColor:"#eee"},_e=Object(Ae.combineReducers)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER":return{currentUser:t.payload.currentUser,isLoading:!1};case"CLEAR_USER":return Object(W.a)(Object(W.a)({},e),{},{isLoading:!1});default:return e}},channel:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Me,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CURRENT_CHANNEL":return Object(W.a)(Object(W.a)({},e),{},{currentChannel:t.payload.currentChannel});case"SET_PRIVATE_CHANNEL":return Object(W.a)(Object(W.a)({},e),{},{isPrivateChannel:t.payload.isPrivateChannel});case"SET_USER_POSTS":return Object(W.a)(Object(W.a)({},e),{},{userPosts:t.payload.userPosts});default:return e}},colors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_COLORS":return{primaryColor:t.payload.primaryColor,secondaryColor:t.payload.secondaryColor};default:return e}}}),xe=Object(Ae.createStore)(_e,Object(Ne.composeWithDevTools)()),De=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this;f.auth().onAuthStateChanged((function(t){t?(e.props.setUser(t),e.props.history.push("/")):(e.props.history.push("/login"),e.props.clearUser())}))}},{key:"render",value:function(){return this.props.isLoading?c.a.createElement(Re,null):c.a.createElement(Oe.a,null,c.a.createElement(we.a,{exact:!0,path:"/",component:pe}),c.a.createElement(we.a,{path:"/login",component:Ce}),c.a.createElement(we.a,{path:"/register",component:be}))}}]),a}(c.a.Component),Fe=Object(Le.a)(Object(m.b)((function(e){return{isLoading:e.user.isLoading}}),{setUser:function(e){return{type:"SET_USER",payload:{currentUser:e}}},clearUser:function(){return{type:"CLEAR_USER"}}})(De));u.a.render(c.a.createElement(m.a,{store:xe},c.a.createElement(Pe.a,null,c.a.createElement(Fe,null))),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("","/service-worker.js");je?(!function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Ue(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")}))):Ue(e)}))}}()}},[[290,1,2]]]);
//# sourceMappingURL=main.b57fe56a.chunk.js.map